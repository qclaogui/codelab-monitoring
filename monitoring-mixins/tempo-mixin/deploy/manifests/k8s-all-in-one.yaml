apiVersion: v1
data:
  tempo-operational.json: |-
    {
          "annotations": {
             "list": [
                {
                   "builtIn": 1,
                   "datasource": {
                      "type": "datasource",
                      "uid": "grafana"
                   },
                   "enable": true,
                   "hide": true,
                   "iconColor": "rgba(0, 211, 255, 1)",
                   "name": "Annotations & Alerts",
                   "target": {
                      "limit": 100,
                      "matchAny": false,
                      "tags": [ ],
                      "type": "dashboard"
                   },
                   "type": "dashboard"
                },
                {
                   "datasource": {
                      "uid": "$logsds"
                   },
                   "enable": true,
                   "expr": "{cluster=\"$cluster\", diff_namespace=\"$namespace\", container=\"kube-diff-logger\"}",
                   "hide": true,
                   "iconColor": "rgba(255, 96, 96, 1)",
                   "name": "diffs",
                   "showIn": 0,
                   "target": { }
                }
             ]
          },
          "editable": true,
          "fiscalYearStartMonth": 0,
          "graphTooltip": 1,
          "links": [
             {
                "asDropdown": true,
                "icon": "external link",
                "includeVars": true,
                "keepTime": true,
                "tags": [
                   "tempo"
                ],
                "targetBlank": false,
                "title": "Tempo Dashboards",
                "type": "dashboards"
             }
          ],
          "liveNow": false,
          "panels": [
             {
                "collapsed": false,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 0
                },
                "id": 38,
                "panels": [ ],
                "title": "General",
                "type": "row"
             },
             {
                "datasource": {
                   "uid": "$ds"
                },
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "palette-classic"
                      },
                      "custom": {
                         "axisCenteredZero": false,
                         "axisColorMode": "text",
                         "axisLabel": "",
                         "axisPlacement": "auto",
                         "barAlignment": 0,
                         "drawStyle": "line",
                         "fillOpacity": 0,
                         "gradientMode": "none",
                         "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                         },
                         "insertNulls": false,
                         "lineInterpolation": "linear",
                         "lineWidth": 1,
                         "pointSize": 5,
                         "scaleDistribution": {
                            "type": "linear"
                         },
                         "showPoints": "never",
                         "spanNulls": true,
                         "stacking": {
                            "group": "A",
                            "mode": "none"
                         },
                         "thresholdsStyle": {
                            "mode": "off"
                         }
                      },
                      "mappings": [ ],
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 80
                            }
                         ]
                      },
                      "unit": "short"
                   },
                   "overrides": [ ]
                },
                "gridPos": {
                   "h": 5,
                   "w": 3,
                   "x": 0,
                   "y": 1
                },
                "id": 24,
                "options": {
                   "legend": {
                      "calcs": [ ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": false
                   },
                   "tooltip": {
                      "mode": "multi",
                      "sort": "desc"
                   }
                },
                "pluginVersion": "9.0.0-d373beebpre",
                "targets": [
                   {
                      "expr": "rate(go_gc_duration_seconds_count{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])",
                      "interval": "",
                      "legendFormat": "{{pod}}",
                      "refId": "A"
                   }
                ],
                "title": "gcs",
                "type": "timeseries"
             },
             {
                "datasource": {
                   "uid": "$ds"
                },
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "palette-classic"
                      },
                      "custom": {
                         "axisCenteredZero": false,
                         "axisColorMode": "text",
                         "axisLabel": "",
                         "axisPlacement": "auto",
                         "barAlignment": 0,
                         "drawStyle": "line",
                         "fillOpacity": 0,
                         "gradientMode": "none",
                         "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                         },
                         "insertNulls": false,
                         "lineInterpolation": "linear",
                         "lineWidth": 1,
                         "pointSize": 5,
                         "scaleDistribution": {
                            "type": "linear"
                         },
                         "showPoints": "never",
                         "spanNulls": true,
                         "stacking": {
                            "group": "A",
                            "mode": "none"
                         },
                         "thresholdsStyle": {
                            "mode": "off"
                         }
                      },
                      "mappings": [ ],
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 80
                            }
                         ]
                      },
                      "unit": "decbytes"
                   },
                   "overrides": [ ]
                },
                "gridPos": {
                   "h": 5,
                   "w": 3,
                   "x": 3,
                   "y": 1
                },
                "id": 25,
                "options": {
                   "legend": {
                      "calcs": [ ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": false
                   },
                   "tooltip": {
                      "mode": "multi",
                      "sort": "desc"
                   }
                },
                "pluginVersion": "9.0.0-d373beebpre",
                "targets": [
                   {
                      "expr": "go_memstats_heap_inuse_bytes{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}",
                      "interval": "",
                      "legendFormat": "{{pod}}",
                      "refId": "A"
                   }
                ],
                "title": "go heap",
                "type": "timeseries"
             },
             {
                "datasource": {
                   "uid": "$ds"
                },
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "palette-classic"
                      },
                      "custom": {
                         "axisCenteredZero": false,
                         "axisColorMode": "text",
                         "axisLabel": "",
                         "axisPlacement": "auto",
                         "barAlignment": 0,
                         "drawStyle": "line",
                         "fillOpacity": 0,
                         "gradientMode": "none",
                         "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                         },
                         "insertNulls": false,
                         "lineInterpolation": "linear",
                         "lineWidth": 1,
                         "pointSize": 5,
                         "scaleDistribution": {
                            "type": "linear"
                         },
                         "showPoints": "never",
                         "spanNulls": true,
                         "stacking": {
                            "group": "A",
                            "mode": "none"
                         },
                         "thresholdsStyle": {
                            "mode": "off"
                         }
                      },
                      "mappings": [ ],
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 80
                            }
                         ]
                      },
                      "unit": "short"
                   },
                   "overrides": [ ]
                },
                "gridPos": {
                   "h": 5,
                   "w": 3,
                   "x": 6,
                   "y": 1
                },
                "id": 23,
                "options": {
                   "legend": {
                      "calcs": [ ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": false
                   },
                   "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                   }
                },
                "pluginVersion": "9.0.0-d373beebpre",
                "targets": [
                   {
                      "expr": "go_goroutines{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}",
                      "legendFormat": "{{pod}}",
                      "refId": "A"
                   }
                ],
                "title": "goroutines",
                "type": "timeseries"
             },
             {
                "datasource": {
                   "uid": "$ds"
                },
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "continuous-BlYlRd"
                      },
                      "custom": {
                         "axisCenteredZero": false,
                         "axisColorMode": "text",
                         "axisLabel": "",
                         "axisPlacement": "auto",
                         "barAlignment": 0,
                         "drawStyle": "line",
                         "fillOpacity": 0,
                         "gradientMode": "none",
                         "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                         },
                         "insertNulls": false,
                         "lineInterpolation": "linear",
                         "lineWidth": 1,
                         "pointSize": 5,
                         "scaleDistribution": {
                            "type": "linear"
                         },
                         "showPoints": "never",
                         "spanNulls": true,
                         "stacking": {
                            "group": "A",
                            "mode": "none"
                         },
                         "thresholdsStyle": {
                            "mode": "off"
                         }
                      },
                      "mappings": [ ],
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            }
                         ]
                      },
                      "unit": "short"
                   },
                   "overrides": [ ]
                },
                "gridPos": {
                   "h": 5,
                   "w": 3,
                   "x": 9,
                   "y": 1
                },
                "id": 42,
                "options": {
                   "legend": {
                      "calcs": [ ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": false
                   },
                   "tooltip": {
                      "mode": "multi",
                      "sort": "desc"
                   }
                },
                "pluginVersion": "9.0.0-d373beebpre",
                "targets": [
                   {
                      "expr": "rate(container_cpu_usage_seconds_total{cluster=\"$cluster\", namespace=\"$namespace\", pod=~\"$component.*\", container!=\"POD\"}[$__rate_interval])",
                      "interval": "",
                      "intervalFactor": 5,
                      "legendFormat": "{{pod}}",
                      "refId": "A"
                   }
                ],
                "title": "cpu",
                "type": "timeseries"
             },
             {
                "datasource": {
                   "uid": "$ds"
                },
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "palette-classic"
                      },
                      "custom": {
                         "axisCenteredZero": false,
                         "axisColorMode": "text",
                         "axisLabel": "",
                         "axisPlacement": "auto",
                         "barAlignment": 0,
                         "drawStyle": "line",
                         "fillOpacity": 0,
                         "gradientMode": "none",
                         "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                         },
                         "insertNulls": false,
                         "lineInterpolation": "linear",
                         "lineWidth": 1,
                         "pointSize": 5,
                         "scaleDistribution": {
                            "type": "linear"
                         },
                         "showPoints": "never",
                         "spanNulls": true,
                         "stacking": {
                            "group": "A",
                            "mode": "none"
                         },
                         "thresholdsStyle": {
                            "mode": "off"
                         }
                      },
                      "mappings": [ ],
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 80
                            }
                         ]
                      },
                      "unit": "decbytes"
                   },
                   "overrides": [ ]
                },
                "gridPos": {
                   "h": 5,
                   "w": 3,
                   "x": 12,
                   "y": 1
                },
                "id": 43,
                "options": {
                   "legend": {
                      "calcs": [ ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": false
                   },
                   "tooltip": {
                      "mode": "multi",
                      "sort": "desc"
                   }
                },
                "pluginVersion": "9.0.0-d373beebpre",
                "targets": [
                   {
                      "expr": "container_memory_working_set_bytes{cluster=\"$cluster\", namespace=\"$namespace\", pod=~\"$component.*\", container!=\"POD\"}",
                      "interval": "",
                      "legendFormat": "{{pod}}",
                      "refId": "A"
                   }
                ],
                "title": "working set",
                "type": "timeseries"
             },
             {
                "datasource": {
                   "uid": "$ds"
                },
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "palette-classic"
                      },
                      "custom": {
                         "axisCenteredZero": false,
                         "axisColorMode": "text",
                         "axisLabel": "",
                         "axisPlacement": "auto",
                         "barAlignment": 0,
                         "drawStyle": "line",
                         "fillOpacity": 0,
                         "gradientMode": "none",
                         "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                         },
                         "insertNulls": false,
                         "lineInterpolation": "linear",
                         "lineWidth": 1,
                         "pointSize": 5,
                         "scaleDistribution": {
                            "type": "linear"
                         },
                         "showPoints": "never",
                         "spanNulls": true,
                         "stacking": {
                            "group": "A",
                            "mode": "none"
                         },
                         "thresholdsStyle": {
                            "mode": "off"
                         }
                      },
                      "mappings": [ ],
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 80
                            }
                         ]
                      },
                      "unit": "decbytes"
                   },
                   "overrides": [ ]
                },
                "gridPos": {
                   "h": 5,
                   "w": 3,
                   "x": 15,
                   "y": 1
                },
                "id": 44,
                "options": {
                   "legend": {
                      "calcs": [ ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": false
                   },
                   "tooltip": {
                      "mode": "multi",
                      "sort": "desc"
                   }
                },
                "pluginVersion": "9.0.0-d373beebpre",
                "targets": [
                   {
                      "expr": "rate(container_network_receive_bytes_total{cluster=\"$cluster\", namespace=\"$namespace\", pod=~\"$component.*\"}[$__rate_interval])",
                      "hide": false,
                      "interval": "",
                      "legendFormat": "rx-{{pod}}",
                      "refId": "A"
                   },
                   {
                      "expr": "rate(container_network_transmit_bytes_total{cluster=\"$cluster\", namespace=\"$namespace\", pod=~\"$component.*\"}[$__rate_interval])",
                      "hide": false,
                      "interval": "",
                      "legendFormat": "tx-{{pod}}",
                      "refId": "B"
                   }
                ],
                "title": "tx/rx",
                "type": "timeseries"
             },
             {
                "datasource": {
                   "uid": "$ds"
                },
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "palette-classic"
                      },
                      "custom": {
                         "axisCenteredZero": false,
                         "axisColorMode": "text",
                         "axisLabel": "",
                         "axisPlacement": "auto",
                         "barAlignment": 0,
                         "drawStyle": "line",
                         "fillOpacity": 0,
                         "gradientMode": "none",
                         "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                         },
                         "insertNulls": false,
                         "lineInterpolation": "linear",
                         "lineWidth": 1,
                         "pointSize": 5,
                         "scaleDistribution": {
                            "type": "linear"
                         },
                         "showPoints": "never",
                         "spanNulls": true,
                         "stacking": {
                            "group": "A",
                            "mode": "none"
                         },
                         "thresholdsStyle": {
                            "mode": "off"
                         }
                      },
                      "mappings": [ ],
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 80
                            }
                         ]
                      },
                      "unit": "decbytes"
                   },
                   "overrides": [ ]
                },
                "gridPos": {
                   "h": 5,
                   "w": 3,
                   "x": 18,
                   "y": 1
                },
                "id": 45,
                "options": {
                   "legend": {
                      "calcs": [ ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": false
                   },
                   "tooltip": {
                      "mode": "multi",
                      "sort": "asc"
                   }
                },
                "pluginVersion": "9.0.0-d373beebpre",
                "targets": [
                   {
                      "expr": "kubelet_volume_stats_available_bytes{cluster=\"$cluster\", namespace=\"$namespace\", persistentvolumeclaim=~\"$component.*\"}",
                      "legendFormat": "{{persistentvolumeclaim}}",
                      "refId": "A"
                   }
                ],
                "title": "data volume free",
                "type": "timeseries"
             },
             {
                "datasource": {
                   "uid": "$ds"
                },
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "palette-classic"
                      },
                      "custom": {
                         "axisCenteredZero": false,
                         "axisColorMode": "text",
                         "axisLabel": "",
                         "axisPlacement": "auto",
                         "barAlignment": 0,
                         "drawStyle": "line",
                         "fillOpacity": 10,
                         "gradientMode": "none",
                         "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                         },
                         "insertNulls": false,
                         "lineInterpolation": "linear",
                         "lineWidth": 1,
                         "pointSize": 5,
                         "scaleDistribution": {
                            "type": "linear"
                         },
                         "showPoints": "never",
                         "spanNulls": true,
                         "stacking": {
                            "group": "A",
                            "mode": "none"
                         },
                         "thresholdsStyle": {
                            "mode": "off"
                         }
                      },
                      "mappings": [ ],
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 80
                            }
                         ]
                      },
                      "unit": "short"
                   },
                   "overrides": [ ]
                },
                "gridPos": {
                   "h": 5,
                   "w": 3,
                   "x": 21,
                   "y": 1
                },
                "id": 46,
                "options": {
                   "legend": {
                      "calcs": [ ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": false
                   },
                   "tooltip": {
                      "mode": "multi",
                      "sort": "desc"
                   }
                },
                "pluginVersion": "9.0.0-d373beebpre",
                "targets": [
                   {
                      "expr": "rate(promtail_custom_bad_words_total{cluster=\"$cluster\", exported_namespace=\"$namespace\", app=~\"$component.*\"}[$__rate_interval])",
                      "interval": "",
                      "legendFormat": "{{exported_pod}}",
                      "refId": "A"
                   }
                ],
                "title": "bad words",
                "type": "timeseries"
             },
             {
                "collapsed": true,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 6
                },
                "id": 49,
                "panels": [
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "percentunit"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 0,
                         "y": 2
                      },
                      "id": 33,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "desc"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "tempodb_work_queue_length{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"} / tempodb_work_queue_max{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}",
                            "legendFormat": "{{instance}}",
                            "refId": "A"
                         }
                      ],
                      "title": "%age total work queue",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 3,
                         "y": 2
                      },
                      "id": 32,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "desc"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(increase(tempodb_compaction_errors_total{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (job)",
                            "legendFormat": "compaction_err",
                            "refId": "B"
                         },
                         {
                            "expr": "sum(increase(tempodb_retention_errors_total{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (job)",
                            "legendFormat": "retention_err",
                            "refId": "C"
                         },
                         {
                            "expr": "sum(increase(tempodb_blocklist_poll_errors_total{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (job)",
                            "legendFormat": "blocklist_err",
                            "refId": "D"
                         }
                      ],
                      "title": "maintenance errors",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "points",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 6,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "always",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 6,
                         "y": 2
                      },
                      "id": 35,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempodb_blocklist_poll_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempodb_blocklist_poll_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (le))",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempodb_blocklist_poll_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "Blocklist Poll Duration",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "normal"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 9,
                         "y": 2
                      },
                      "id": 47,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "avg(tempodb_blocklist_length{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}) by (tenant)",
                            "instant": false,
                            "interval": "",
                            "legendFormat": "{{tenant}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Blocklist Length",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "points",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 6,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "always",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 12,
                         "y": 2
                      },
                      "id": 51,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempodb_retention_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/compactor\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempodb_retention_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/compactor\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempodb_retention_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/compactor\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "retention duration",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 15,
                         "y": 2
                      },
                      "id": 53,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "desc"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(increase(tempodb_retention_deleted_total{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "deleted",
                            "refId": "A"
                         },
                         {
                            "expr": "sum(increase(tempodb_retention_marked_for_deletion_total{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "marked_for_deletion",
                            "refId": "B"
                         }
                      ],
                      "title": "retention",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 18,
                         "y": 2
                      },
                      "id": 70,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "increase(kube_pod_container_status_restarts_total{cluster=\"$cluster\", namespace=\"$namespace\"}[5m]) > 0",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{pod}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Container Restarts",
                      "type": "timeseries"
                   }
                ],
                "title": "Maintenance",
                "type": "row"
             },
             {
                "collapsed": true,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 7
                },
                "id": 21,
                "panels": [
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 0,
                         "y": 8
                      },
                      "id": 34,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\".*api_traces_traceid\", cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Queries/Sec (cortex-gw)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 4,
                         "y": 8
                      },
                      "id": 78,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "Query Latency (Gateway)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 12,
                         "y": 8
                      },
                      "id": 97,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\".*api_search.*\", cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Search Queries/Sec (cortex-gw)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 16,
                         "y": 8
                      },
                      "id": 93,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A",
                            "stepMode": "min"
                         },
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                            "hide": false,
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B",
                            "stepMode": "min"
                         },
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                            "hide": false,
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Search Query Latency (Gateway)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 0,
                         "y": 13
                      },
                      "id": 90,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=\"$cluster\", namespace=\"$namespace\", route=~\".*api_traces_traceid\", job=\"$namespace/query-frontend\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Queries/Sec (Query Frontend)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 4,
                         "y": 13
                      },
                      "id": 17,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "Query Latency (Query Frontend)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 12,
                         "y": 13
                      },
                      "id": 98,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=\"$cluster\", namespace=\"$namespace\", route=~\".*api_search.*\", job=\"$namespace/query-frontend\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Search Queries/Sec (Query Frontend)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 16,
                         "y": 13
                      },
                      "id": 94,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A",
                            "stepMode": "min"
                         },
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B",
                            "stepMode": "min"
                         },
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Search Query Latency (Query Frontend)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 0,
                         "y": 18
                      },
                      "id": 91,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\"querier_.*api_traces_traceid\", cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Queries/Sec (Querier)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 4,
                         "y": 18
                      },
                      "id": 89,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_traces_traceid\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "Query Latency (Querier)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 12,
                         "y": 18
                      },
                      "id": 99,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\"querier_.*api_search.*\", cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Search Queries/Sec (Querier)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 16,
                         "y": 18
                      },
                      "id": 95,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A",
                            "stepMode": "min"
                         },
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B",
                            "stepMode": "min"
                         },
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Search Query Latency (Querier)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 0,
                         "y": 23
                      },
                      "id": 92,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=\"/tempopb.Querier/FindTraceByID\", cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Queries/Sec (Ingester)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 4,
                         "y": 23
                      },
                      "id": 3,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=\"/tempopb.Querier/FindTraceByID\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=\"/tempopb.Querier/FindTraceByID\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=\"/tempopb.Querier/FindTraceByID\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "Query Latency (Ingester)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 12,
                         "y": 23
                      },
                      "id": 100,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\"/tempopb.Querier/Search.*\", cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Search Queries/Sec (Ingester)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 16,
                         "y": 23
                      },
                      "id": 96,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=~\"/tempopb.Querier/Search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A",
                            "stepMode": "min"
                         },
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=~\"/tempopb.Querier/Search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B",
                            "stepMode": "min"
                         },
                         {
                            "exemplar": true,
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=~\"/tempopb.Querier/Search.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Search Query Latency (Ingester)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 0,
                         "y": 28
                      },
                      "id": 102,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\".*api_metrics_summary\", cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "range": true,
                            "refId": "A"
                         }
                      ],
                      "title": "Metrics Summary QPS (cortex-gw)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 4,
                         "y": 28
                      },
                      "id": 103,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_metrics_summary\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "range": true,
                            "refId": "A"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_metrics_summary\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "range": true,
                            "refId": "B"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=~\".*api_metrics_summary\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "range": true,
                            "refId": "C"
                         }
                      ],
                      "title": "Metrics Summary Latency (Gateway)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 12,
                         "y": 28
                      },
                      "id": 110,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "exemplar": true,
                            "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=\"$cluster\", namespace=\"$namespace\", route=~\".*api_metrics.*\", job=\"$namespace/query-frontend\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "range": true,
                            "refId": "A",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Metrics Summary QPS (Query Frontend)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 16,
                         "y": 28
                      },
                      "id": 111,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "exemplar": true,
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_metrics.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "range": true,
                            "refId": "A",
                            "stepMode": "min"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "exemplar": true,
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_metrics.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "range": true,
                            "refId": "B",
                            "stepMode": "min"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "exemplar": true,
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/query-frontend\", route=~\".*api_metrics.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "range": true,
                            "refId": "C",
                            "stepMode": "min"
                         }
                      ],
                      "title": "Metrics Summary Latency (Query Frontend)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 0,
                         "y": 33
                      },
                      "id": 112,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\"querier_.*api_metrics.*\", cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}} {{route}}",
                            "range": true,
                            "refId": "A"
                         }
                      ],
                      "title": "Metrics Summary QPS (Querier)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 4,
                         "y": 33
                      },
                      "id": 113,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_metrics.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "range": true,
                            "refId": "A"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_metrics.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "range": true,
                            "refId": "B"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/querier\", route=~\"querier_.*api_metrics.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "range": true,
                            "refId": "C"
                         }
                      ],
                      "title": "Metrics Summary Latency (Querier)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 4,
                         "x": 12,
                         "y": 33
                      },
                      "id": 106,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "sum(rate(tempo_request_duration_seconds_count{route=\"/tempopb.MetricsGenerator/GetMetrics\", cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/metrics-generator\"}[$__rate_interval])) by (status_code)",
                            "hide": false,
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "range": true,
                            "refId": "A"
                         }
                      ],
                      "title": "GetMetrics QPS (Metrics Generator)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 16,
                         "y": 33
                      },
                      "id": 107,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/metrics-generator\", route=\"/tempopb.MetricsGenerator/GetMetrics\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "range": true,
                            "refId": "A"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/metrics-generator\", route=\"/tempopb.MetricsGenerator/GetMetrics\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "range": true,
                            "refId": "B"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/metrics-generator\", route=\"/tempopb.MetricsGenerator/GetMetrics\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "range": true,
                            "refId": "C"
                         }
                      ],
                      "title": "GetMetrics Latency (Metrics Generator)",
                      "type": "timeseries"
                   }
                ],
                "title": "Read",
                "type": "row"
             },
             {
                "collapsed": true,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 8
                },
                "id": 19,
                "panels": [
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 0,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "normal"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 0,
                         "y": 4
                      },
                      "id": 10,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "P666011C0B63BDCA4"
                            },
                            "editorMode": "code",
                            "expr": "sum by(cluster) (rate(tempo_distributor_spans_received_total{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "{{pod}}",
                            "range": true,
                            "refId": "A"
                         }
                      ],
                      "title": "Spans Received",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "normal"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 3,
                         "y": 4
                      },
                      "id": 9,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "P1809F7CD0C75ACF3"
                            },
                            "editorMode": "builder",
                            "expr": "sum by(cluster) (rate(tempo_ingester_traces_created_total{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "",
                            "range": true,
                            "refId": "A"
                         }
                      ],
                      "title": "Traces Created",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 6,
                         "y": 4
                      },
                      "id": 8,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "expr": "sum(increase(tempo_ingester_blocks_flushed_total{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\"}[1h]))",
                            "interval": "",
                            "legendFormat": "{{pod}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Blocks Flushed (1h)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 9,
                         "y": 4
                      },
                      "id": 12,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "expr": "increase(tempo_ingester_failed_flushes_total{cluster=\"$cluster\", namespace=\"$namespace\"}[5m]) > 0",
                            "interval": "",
                            "legendFormat": "{{pod}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Failed Flushes",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 12,
                         "y": 4
                      },
                      "id": 26,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "expr": "sum(increase(tempo_ingester_blocks_cleared_total{cluster=\"$cluster\", namespace=\"$namespace\"}[1h]))",
                            "interval": "",
                            "legendFormat": "",
                            "refId": "A"
                         }
                      ],
                      "title": "Blocks Cleared (1h)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "points",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 6,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "always",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 15,
                         "y": 4
                      },
                      "id": 36,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempo_ingester_flush_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempo_ingester_flush_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempo_ingester_flush_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "Flush Duration",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 6,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "always",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 3,
                         "x": 18,
                         "y": 4
                      },
                      "id": 114,
                      "options": {
                         "legend": {
                            "calcs": [
                               "lastNotNull"
                            ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "sum(tempo_distributor_queue_length{cluster=~\"$cluster\", namespace=~\"$namespace\", job=~\".*/distributor\"}) by (name)",
                            "interval": "",
                            "legendFormat": "{{name}}",
                            "range": true,
                            "refId": "A"
                         }
                      ],
                      "title": "Distributor Queue Length",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 10,
                         "w": 7,
                         "x": 0,
                         "y": 9
                      },
                      "id": 71,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval])) by (status_code)",
                            "interval": "",
                            "legendFormat": "{{status_code}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Pushes/sec (gateway)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "none"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 10,
                         "w": 6,
                         "x": 7,
                         "y": 9
                      },
                      "id": 72,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_receiver_accepted_spans{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "accepted",
                            "refId": "A"
                         },
                         {
                            "expr": "sum(rate(tempo_receiver_refused_spans{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "refused",
                            "refId": "B"
                         }
                      ],
                      "title": "OTEL Distributor Spans/second",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 7,
                         "x": 13,
                         "y": 9
                      },
                      "id": 79,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "Push Latency (Gateway)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 7,
                         "x": 13,
                         "y": 14
                      },
                      "id": 2,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "refId": "C"
                         }
                      ],
                      "title": "Push Latency (Ingester)",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "none"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 6,
                         "x": 7,
                         "y": 19
                      },
                      "id": 109,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "sum(rate(tempo_metrics_generator_spans_received_total{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "accepted",
                            "range": true,
                            "refId": "A"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "sum(rate(tempo_metrics_generator_spans_discarded_total{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval])) by (reason)",
                            "interval": "",
                            "legendFormat": "refused {{reason}}",
                            "range": true,
                            "refId": "B"
                         }
                      ],
                      "title": "Generator Spans/second",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisCenteredZero": false,
                               "axisColorMode": "text",
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "insertNulls": false,
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green",
                                     "value": null
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 5,
                         "w": 7,
                         "x": 13,
                         "y": 19
                      },
                      "id": 108,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d452322apre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/metrics-generator\", route=~\"/tempopb.MetricsGenerator/PushSpans\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".99",
                            "range": true,
                            "refId": "A"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/metrics-generator\", route=~\"/tempopb.MetricsGenerator/PushSpans\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".9",
                            "range": true,
                            "refId": "B"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "cortex-ops-01"
                            },
                            "editorMode": "code",
                            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/metrics-generator\", route=~\"/tempopb.MetricsGenerator/PushSpans\"}[$__rate_interval])) by (le))",
                            "interval": "",
                            "legendFormat": ".5",
                            "range": true,
                            "refId": "C"
                         }
                      ],
                      "title": "Push Latency (Generator)",
                      "type": "timeseries"
                   }
                ],
                "title": "Write",
                "type": "row"
             },
             {
                "collapsed": true,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 9
                },
                "id": 74,
                "panels": [
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "links": [ ],
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 8,
                         "w": 12,
                         "x": 0,
                         "y": 15
                      },
                      "id": 75,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_memcache_request_duration_seconds_count{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (status_code, method)",
                            "interval": "",
                            "legendFormat": "{{status_code}}-{{method}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Requests/Second",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "links": [ ],
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 8,
                         "w": 12,
                         "x": 12,
                         "y": 15
                      },
                      "id": 76,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (method, le))",
                            "interval": "",
                            "legendFormat": ".99-{{method}}",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (method, le))",
                            "interval": "",
                            "legendFormat": ".9-{{method}}",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (method, le))",
                            "interval": "",
                            "legendFormat": ".5-{{method}}",
                            "refId": "C"
                         }
                      ],
                      "title": "Latency By Operation",
                      "type": "timeseries"
                   }
                ],
                "title": "Memcached",
                "type": "row"
             },
             {
                "collapsed": true,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 10
                },
                "id": 28,
                "panels": [
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "links": [ ],
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 8,
                         "w": 12,
                         "x": 0,
                         "y": 16
                      },
                      "id": 31,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempodb_backend_request_duration_seconds_count{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (status_code, operation)",
                            "interval": "",
                            "legendFormat": "{{status_code}}-{{operation}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Requests/Second",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "links": [ ],
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "s"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 8,
                         "w": 12,
                         "x": 12,
                         "y": 16
                      },
                      "id": 30,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "histogram_quantile(.99, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (operation, le))",
                            "legendFormat": ".99-{{operation}}",
                            "refId": "A"
                         },
                         {
                            "expr": "histogram_quantile(.9, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (operation, le))",
                            "legendFormat": ".9-{{operation}}",
                            "refId": "B"
                         },
                         {
                            "expr": "histogram_quantile(.5, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}[$__rate_interval])) by (operation, le))",
                            "legendFormat": ".5-{{operation}}",
                            "refId": "C"
                         }
                      ],
                      "title": "Latency By Operation",
                      "type": "timeseries"
                   }
                ],
                "title": "Backend",
                "type": "row"
             },
             {
                "collapsed": true,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 11
                },
                "id": 56,
                "panels": [
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "links": [ ],
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 8,
                         "w": 6,
                         "x": 0,
                         "y": 17
                      },
                      "id": 58,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "desc"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "P666011C0B63BDCA4"
                            },
                            "expr": "gauge_memberlist_health_score{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}",
                            "interval": "",
                            "legendFormat": "{{instance}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Gossip Health",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "links": [ ],
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 8,
                         "w": 6,
                         "x": 6,
                         "y": 17
                      },
                      "id": 62,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "desc"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "tempo_memberlist_client_cluster_node_health_score{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"}",
                            "interval": "",
                            "legendFormat": "{{instance}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Node Health",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "links": [ ],
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 8,
                         "w": 6,
                         "x": 12,
                         "y": 17
                      },
                      "id": 63,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "desc"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "min(tempo_memberlist_client_cluster_members_count{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"})",
                            "interval": "",
                            "legendFormat": "min",
                            "refId": "A"
                         },
                         {
                            "expr": "max(tempo_memberlist_client_cluster_members_count{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"})",
                            "interval": "",
                            "legendFormat": "max",
                            "refId": "B"
                         }
                      ],
                      "title": "Member Count",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "links": [ ],
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 8,
                         "w": 6,
                         "x": 18,
                         "y": 17
                      },
                      "id": 60,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "desc"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "P666011C0B63BDCA4"
                            },
                            "expr": "min(tempo_memberlist_client_kv_store_count{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"})",
                            "interval": "",
                            "legendFormat": "min",
                            "refId": "A"
                         },
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "P666011C0B63BDCA4"
                            },
                            "expr": "max(tempo_memberlist_client_kv_store_count{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/$component\"})",
                            "interval": "",
                            "legendFormat": "max",
                            "refId": "B"
                         }
                      ],
                      "title": "KV Store Count",
                      "type": "timeseries"
                   }
                ],
                "title": "Ring/Memberlist",
                "type": "row"
             },
             {
                "collapsed": true,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 12
                },
                "id": 69,
                "panels": [
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 0,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "auto",
                               "spanNulls": false,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [ ]
                            },
                            "unit": "percentunit"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 9,
                         "w": 12,
                         "x": 0,
                         "y": 18
                      },
                      "id": 77,
                      "options": {
                         "graph": { },
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "single",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "7.5.0-14141pre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_vulture_trace_error_total{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval])) by (error) / ignoring (error) group_left sum(rate(tempo_vulture_trace_total{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "{{error}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Vulture Query Errors",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "thresholds"
                            },
                            "mappings": [ ],
                            "max": 1,
                            "min": 0,
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  }
                               ]
                            },
                            "unit": "percentunit"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 9,
                         "w": 12,
                         "x": 12,
                         "y": 18
                      },
                      "id": 67,
                      "options": {
                         "displayMode": "gradient",
                         "minVizHeight": 10,
                         "minVizWidth": 0,
                         "orientation": "auto",
                         "reduceOptions": {
                            "calcs": [
                               "mean"
                            ],
                            "fields": "",
                            "values": false
                         },
                         "showUnfilled": true,
                         "text": { }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_vulture_trace_error_total{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval])) by (error) / ignoring (error) group_left sum(rate(tempo_vulture_trace_total{cluster=\"$cluster\", namespace=\"$namespace\"}[$__rate_interval]))",
                            "interval": "",
                            "legendFormat": "{{secondsago}}",
                            "refId": "A"
                         }
                      ],
                      "title": "Average Vulture Query Errors",
                      "type": "bargauge"
                   }
                ],
                "title": "Vulture",
                "type": "row"
             },
             {
                "collapsed": true,
                "datasource": {
                   "type": "prometheus",
                   "uid": "P1809F7CD0C75ACF3"
                },
                "gridPos": {
                   "h": 1,
                   "w": 24,
                   "x": 0,
                   "y": 13
                },
                "id": 81,
                "panels": [
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 6,
                         "w": 4,
                         "x": 0,
                         "y": 19
                      },
                      "id": 83,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempodb_compaction_objects_combined_total{cluster=\"$cluster\", namespace=\"$namespace\", job=~\"$namespace/compactor\"}[$__rate_interval])) by (level)",
                            "interval": "",
                            "legendFormat": "",
                            "refId": "A"
                         }
                      ],
                      "title": "Objects Combined / s",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "uid": "$ds"
                      },
                      "description": "",
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "normal"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  },
                                  {
                                     "color": "red",
                                     "value": 80
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 6,
                         "w": 4,
                         "x": 4,
                         "y": 19
                      },
                      "id": 85,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "expr": "sum(rate(tempodb_compaction_objects_written_total{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/compactor\"}[$__rate_interval])) by (level)",
                            "interval": "",
                            "legendFormat": "",
                            "refId": "A"
                         }
                      ],
                      "title": "Objects Written / s",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "none"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 6,
                         "w": 4,
                         "x": 8,
                         "y": 19
                      },
                      "id": 88,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": true
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "P666011C0B63BDCA4"
                            },
                            "editorMode": "builder",
                            "expr": "sum(rate(tempodb_compaction_bytes_written_total{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/compactor\"}[$__rate_interval])) by (level)",
                            "interval": "",
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "A"
                         }
                      ],
                      "title": "Bytes Written / s",
                      "type": "timeseries"
                   },
                   {
                      "datasource": {
                         "type": "prometheus",
                         "uid": "$ds"
                      },
                      "fieldConfig": {
                         "defaults": {
                            "color": {
                               "mode": "palette-classic"
                            },
                            "custom": {
                               "axisLabel": "",
                               "axisPlacement": "auto",
                               "barAlignment": 0,
                               "drawStyle": "line",
                               "fillOpacity": 10,
                               "gradientMode": "none",
                               "hideFrom": {
                                  "legend": false,
                                  "tooltip": false,
                                  "viz": false
                               },
                               "lineInterpolation": "linear",
                               "lineWidth": 1,
                               "pointSize": 5,
                               "scaleDistribution": {
                                  "type": "linear"
                               },
                               "showPoints": "never",
                               "spanNulls": true,
                               "stacking": {
                                  "group": "A",
                                  "mode": "normal"
                               },
                               "thresholdsStyle": {
                                  "mode": "off"
                               }
                            },
                            "mappings": [ ],
                            "thresholds": {
                               "mode": "absolute",
                               "steps": [
                                  {
                                     "color": "green"
                                  }
                               ]
                            },
                            "unit": "short"
                         },
                         "overrides": [ ]
                      },
                      "gridPos": {
                         "h": 6,
                         "w": 4,
                         "x": 12,
                         "y": 19
                      },
                      "id": 86,
                      "options": {
                         "legend": {
                            "calcs": [ ],
                            "displayMode": "list",
                            "placement": "bottom",
                            "showLegend": false
                         },
                         "tooltip": {
                            "mode": "multi",
                            "sort": "none"
                         }
                      },
                      "pluginVersion": "9.0.0-d373beebpre",
                      "targets": [
                         {
                            "datasource": {
                               "type": "prometheus",
                               "uid": "P666011C0B63BDCA4"
                            },
                            "editorMode": "code",
                            "expr": "sum(increase(tempodb_compaction_blocks_total{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/compactor\"}[5m])) by (level)",
                            "interval": "",
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "A"
                         }
                      ],
                      "title": "Blocks Compacted",
                      "type": "timeseries"
                   }
                ],
                "title": "Compactor",
                "type": "row"
             }
          ],
          "refresh": "",
          "schemaVersion": 38,
          "tags": [
             "tempo"
          ],
          "templating": {
             "list": [
                {
                   "current": {
                      "selected": false,
                      "text": "default",
                      "value": "default"
                   },
                   "hide": 0,
                   "includeAll": false,
                   "multi": false,
                   "name": "ds",
                   "options": [ ],
                   "query": "prometheus",
                   "queryValue": "",
                   "refresh": 1,
                   "regex": "",
                   "skipUrlSync": false,
                   "type": "datasource"
                },
                {
                   "current": {
                      "selected": false,
                      "text": "loki-ops",
                      "value": "loki-ops"
                   },
                   "hide": 0,
                   "includeAll": false,
                   "multi": false,
                   "name": "logsds",
                   "options": [ ],
                   "query": "loki",
                   "queryValue": "",
                   "refresh": 1,
                   "regex": "",
                   "skipUrlSync": false,
                   "type": "datasource"
                },
                {
                   "current": {
                      "selected": true,
                      "text": "ops-us-east-0",
                      "value": "ops-us-east-0"
                   },
                   "datasource": {
                      "type": "prometheus",
                      "uid": "$ds"
                   },
                   "definition": "label_values(tempo_build_info, cluster)",
                   "hide": 0,
                   "includeAll": false,
                   "multi": false,
                   "name": "cluster",
                   "options": [ ],
                   "query": {
                      "query": "label_values(tempo_build_info, cluster)",
                      "refId": "ops-cortex-cluster-Variable-Query"
                   },
                   "refresh": 1,
                   "regex": "",
                   "skipUrlSync": false,
                   "sort": 1,
                   "tagValuesQuery": "",
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                },
                {
                   "current": {
                      "selected": true,
                      "text": "tempo-ops",
                      "value": "tempo-ops"
                   },
                   "datasource": {
                      "type": "prometheus",
                      "uid": "$ds"
                   },
                   "definition": "label_values(tempo_build_info{cluster=~'$cluster'}, namespace)",
                   "hide": 0,
                   "includeAll": false,
                   "multi": false,
                   "name": "namespace",
                   "options": [ ],
                   "query": {
                      "query": "label_values(tempo_build_info{cluster=~'$cluster'}, namespace)",
                      "refId": "ops-cortex-namespace-Variable-Query"
                   },
                   "refresh": 1,
                   "regex": "",
                   "skipUrlSync": false,
                   "sort": 1,
                   "tagValuesQuery": "",
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                },
                {
                   "allValue": ".*",
                   "current": {
                      "selected": false,
                      "text": "All",
                      "value": "$__all"
                   },
                   "hide": 0,
                   "includeAll": true,
                   "multi": false,
                   "name": "component",
                   "options": [
                      {
                         "selected": true,
                         "text": "All",
                         "value": "$__all"
                      },
                      {
                         "selected": false,
                         "text": "compactor",
                         "value": "compactor"
                      },
                      {
                         "selected": false,
                         "text": "distributor",
                         "value": "distributor"
                      },
                      {
                         "selected": false,
                         "text": "ingester",
                         "value": "ingester"
                      },
                      {
                         "selected": false,
                         "text": "metrics-generator",
                         "value": "metrics-generator"
                      },
                      {
                         "selected": false,
                         "text": "query-frontend",
                         "value": "query-frontend"
                      },
                      {
                         "selected": false,
                         "text": "querier",
                         "value": "querier"
                      },
                      {
                         "selected": false,
                         "text": "cortex-gw",
                         "value": "cortex-gw"
                      },
                      {
                         "selected": false,
                         "text": "cortex-gw-internal",
                         "value": "cortex-gw-internal"
                      }
                   ],
                   "query": "compactor,distributor,ingester,metrics-generator,query-frontend,querier,cortex-gw,cortex-gw-internal",
                   "queryValue": "",
                   "skipUrlSync": false,
                   "type": "custom"
                }
             ]
          },
          "time": {
             "from": "now-6h",
             "to": "now"
          },
          "timepicker": {
             "refresh_intervals": [
                "10s",
                "30s",
                "1m",
                "5m",
                "15m",
                "30m",
                "1h",
                "2h",
                "1d"
             ]
          },
          "timezone": "",
          "title": "Tempo Operational",
          "uid": "a6175b9cc7ec20591890117c39580030",
          "version": 1,
          "weekStart": ""
       }
kind: ConfigMap
metadata:
  annotations:
    grafana_dashboard_folder: /dashboards/tempo-mixin
  labels:
    grafana_dashboard: "1"
  name: tempo-operational.json
  namespace: monitoring-system
---
apiVersion: v1
data:
  tempo-reads.json: |-
    {
          "annotations": {
             "list": [ ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "hideControls": false,
          "links": [
             {
                "asDropdown": true,
                "icon": "external link",
                "includeVars": true,
                "keepTime": true,
                "tags": [
                   "tempo"
                ],
                "targetBlank": false,
                "title": "Tempo Dashboards",
                "type": "dashboards"
             }
          ],
          "refresh": "",
          "rows": [
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 1,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"api_.*\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 2,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\",route=~\"api_.*\"}[$__rate_interval])) by (le,route)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\",route=~\"api_.*\"}[$__rate_interval])) by (le,route)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\",route=~\"api_.*\"}[$__rate_interval])) by (route) * 1e3 / sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\",route=~\"api_.*\"}[$__rate_interval])) by (route)",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Gateway",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 3,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|query-frontend)\", route=~\"api_.*\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 4,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|query-frontend)\",route=~\"api_.*\"}[$__rate_interval])) by (le,route)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|query-frontend)\",route=~\"api_.*\"}[$__rate_interval])) by (le,route)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|query-frontend)\",route=~\"api_.*\"}[$__rate_interval])) by (route) * 1e3 / sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|query-frontend)\",route=~\"api_.*\"}[$__rate_interval])) by (route)",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Query Frontend",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 5,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\", route=~\"querier_api_.*\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 6,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",route=~\"querier_api_.*\"}[$__rate_interval])) by (le,route)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",route=~\"querier_api_.*\"}[$__rate_interval])) by (le,route)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",route=~\"querier_api_.*\"}[$__rate_interval])) by (route) * 1e3 / sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",route=~\"querier_api_.*\"}[$__rate_interval])) by (route)",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Querier",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 7,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_querier_external_endpoint_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 8,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_querier_external_endpoint_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\"}[$__rate_interval])) by (le,endpoint)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_querier_external_endpoint_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\"}[$__rate_interval])) by (le,endpoint)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_querier_external_endpoint_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\"}[$__rate_interval])) by (endpoint) * 1e3 / sum(rate(tempo_querier_external_endpoint_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\"}[$__rate_interval])) by (endpoint)",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Querier External Endpoint",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 9,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\", route=~\"/tempopb.Querier/.*\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 10,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",route=~\"/tempopb.Querier/.*\"}[$__rate_interval])) by (le,route)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",route=~\"/tempopb.Querier/.*\"}[$__rate_interval])) by (le,route)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",route=~\"/tempopb.Querier/.*\"}[$__rate_interval])) by (route) * 1e3 / sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",route=~\"/tempopb.Querier/.*\"}[$__rate_interval])) by (route)",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Ingester",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 11,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_memcache_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",method=~\"Memcache.Get|Memcache.GetMulti\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 12,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",method=~\"Memcache.Get|Memcache.GetMulti\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",method=~\"Memcache.Get|Memcache.GetMulti\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_memcache_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",method=~\"Memcache.Get|Memcache.GetMulti\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempo_memcache_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",method=~\"Memcache.Get|Memcache.GetMulti\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Memcached",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 13,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempodb_backend_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",operation=\"GET\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 14,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",operation=\"GET\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",operation=\"GET\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempodb_backend_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",operation=\"GET\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempodb_backend_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\",operation=\"GET\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Backend",
                "titleSize": "h6"
             }
          ],
          "schemaVersion": 14,
          "style": "dark",
          "tags": [
             "tempo"
          ],
          "templating": {
             "list": [
                {
                   "current": {
                      "text": "default",
                      "value": "default"
                   },
                   "hide": 0,
                   "label": "Data source",
                   "name": "datasource",
                   "options": [ ],
                   "query": "prometheus",
                   "refresh": 1,
                   "regex": "",
                   "type": "datasource"
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": true,
                   "label": "cluster",
                   "multi": true,
                   "name": "cluster",
                   "options": [ ],
                   "query": "label_values(tempo_build_info, cluster)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": true,
                   "label": "namespace",
                   "multi": true,
                   "name": "namespace",
                   "options": [ ],
                   "query": "label_values(tempo_build_info{cluster=~'$cluster'}, namespace)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                }
             ]
          },
          "time": {
             "from": "now-1h",
             "to": "now"
          },
          "timepicker": {
             "refresh_intervals": [
                "5s",
                "10s",
                "30s",
                "1m",
                "5m",
                "15m",
                "30m",
                "1h",
                "2h",
                "1d"
             ],
             "time_options": [
                "5m",
                "15m",
                "1h",
                "6h",
                "12h",
                "24h",
                "2d",
                "7d",
                "30d"
             ]
          },
          "timezone": "utc",
          "title": "Tempo / Reads",
          "uid": "",
          "version": 0
       }
kind: ConfigMap
metadata:
  annotations:
    grafana_dashboard_folder: /dashboards/tempo-mixin
  labels:
    grafana_dashboard: "1"
  name: tempo-reads.json
  namespace: monitoring-system
---
apiVersion: v1
data:
  tempo-resources.json: |-
    {
          "annotations": {
             "list": [ ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "hideControls": false,
          "links": [
             {
                "asDropdown": true,
                "icon": "external link",
                "includeVars": true,
                "keepTime": true,
                "tags": [
                   "tempo"
                ],
                "targetBlank": false,
                "title": "Tempo Dashboards",
                "type": "dashboards"
             }
          ],
          "refresh": "",
          "rows": [
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 1,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"cortex-gw(-internal)?\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_cpu_quota{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"cortex-gw(-internal)?\"} / container_spec_cpu_period{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"cortex-gw(-internal)?\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"cortex-gw(-internal)?\", resource=\"cpu\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "CPU",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 2,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"cortex-gw(-internal)?\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_memory_limit_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"cortex-gw(-internal)?\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"cortex-gw(-internal)?\", resource=\"memory\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (workingset)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 3,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(instance) (go_memstats_heap_inuse_bytes{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{instance}}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (go heap inuse)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Gateway",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 4,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|distributor)\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_cpu_quota{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|distributor)\"} / container_spec_cpu_period{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|distributor)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|distributor)\", resource=\"cpu\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "CPU",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 5,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|distributor)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_memory_limit_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|distributor)\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|distributor)\", resource=\"memory\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (workingset)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 6,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(instance) (go_memstats_heap_inuse_bytes{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{instance}}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (go heap inuse)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Distributor",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 7,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|ingester)\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_cpu_quota{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|ingester)\"} / container_spec_cpu_period{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|ingester)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|ingester)\", resource=\"cpu\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "CPU",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 8,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|ingester)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_memory_limit_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|ingester)\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|ingester)\", resource=\"memory\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (workingset)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 9,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(instance) (go_memstats_heap_inuse_bytes{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{instance}}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (go heap inuse)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Ingester",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 10,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|metrics-generator)\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_cpu_quota{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|metrics-generator)\"} / container_spec_cpu_period{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|metrics-generator)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|metrics-generator)\", resource=\"cpu\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "CPU",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 11,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|metrics-generator)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_memory_limit_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|metrics-generator)\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|metrics-generator)\", resource=\"memory\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (workingset)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 12,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(instance) (go_memstats_heap_inuse_bytes{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|metrics-generator)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{instance}}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (go heap inuse)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Metrics-generator",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 13,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|query-frontend)\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_cpu_quota{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|query-frontend)\"} / container_spec_cpu_period{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|query-frontend)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|query-frontend)\", resource=\"cpu\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "CPU",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 14,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|query-frontend)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_memory_limit_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|query-frontend)\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|query-frontend)\", resource=\"memory\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (workingset)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 15,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(instance) (go_memstats_heap_inuse_bytes{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|query-frontend)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{instance}}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (go heap inuse)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Query Frontend",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 16,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|querier)\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_cpu_quota{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|querier)\"} / container_spec_cpu_period{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|querier)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|querier)\", resource=\"cpu\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "CPU",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 17,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|querier)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_memory_limit_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|querier)\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|querier)\", resource=\"memory\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (workingset)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 18,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(instance) (go_memstats_heap_inuse_bytes{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|querier)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{instance}}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (go heap inuse)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Querier",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 19,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|compactor)\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_cpu_quota{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|compactor)\"} / container_spec_cpu_period{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|compactor)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|compactor)\", resource=\"cpu\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "CPU",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 20,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "color": "#E02F44",
                            "fill": 0
                         },
                         {
                            "alias": "request",
                            "color": "#FCE300",
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|compactor)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{pod}}",
                            "legendLink": null
                         },
                         {
                            "expr": "min(container_spec_memory_limit_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|compactor)\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "min(kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"(tempo|compactor)\", resource=\"memory\"} > 0)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "request",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (workingset)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 21,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by(instance) (go_memstats_heap_inuse_bytes{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{instance}}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Memory (go heap inuse)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "bytes",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Compactor",
                "titleSize": "h6"
             }
          ],
          "schemaVersion": 14,
          "style": "dark",
          "tags": [
             "tempo"
          ],
          "templating": {
             "list": [
                {
                   "current": {
                      "text": "default",
                      "value": "default"
                   },
                   "hide": 0,
                   "label": "Data source",
                   "name": "datasource",
                   "options": [ ],
                   "query": "prometheus",
                   "refresh": 1,
                   "regex": "",
                   "type": "datasource"
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": true,
                   "label": "cluster",
                   "multi": true,
                   "name": "cluster",
                   "options": [ ],
                   "query": "label_values(tempo_build_info, cluster)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": true,
                   "label": "namespace",
                   "multi": true,
                   "name": "namespace",
                   "options": [ ],
                   "query": "label_values(tempo_build_info{cluster=~'$cluster'}, namespace)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                }
             ]
          },
          "time": {
             "from": "now-1h",
             "to": "now"
          },
          "timepicker": {
             "refresh_intervals": [
                "5s",
                "10s",
                "30s",
                "1m",
                "5m",
                "15m",
                "30m",
                "1h",
                "2h",
                "1d"
             ],
             "time_options": [
                "5m",
                "15m",
                "1h",
                "6h",
                "12h",
                "24h",
                "2d",
                "7d",
                "30d"
             ]
          },
          "timezone": "utc",
          "title": "Tempo / Resources",
          "uid": "",
          "version": 0
       }
kind: ConfigMap
metadata:
  annotations:
    grafana_dashboard_folder: /dashboards/tempo-mixin
  labels:
    grafana_dashboard: "1"
  name: tempo-resources.json
  namespace: monitoring-system
---
apiVersion: v1
data:
  tempo-rollout-progress.json: |-
    {
          "annotations": {
             "list": [ ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "hideControls": false,
          "links": [
             {
                "asDropdown": true,
                "icon": "external link",
                "includeVars": true,
                "keepTime": true,
                "tags": [
                   "tempo"
                ],
                "targetBlank": false,
                "title": "Tempo Dashboards",
                "type": "dashboards"
             }
          ],
          "panels": [
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "mappings": [ ],
                      "max": 1,
                      "min": 0,
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "yellow",
                               "value": null
                            },
                            {
                               "color": "yellow",
                               "value": 0.999
                            },
                            {
                               "color": "green",
                               "value": 1
                            }
                         ]
                      },
                      "unit": "percentunit"
                   }
                },
                "fill": 1,
                "gridPos": {
                   "h": 8,
                   "w": 10,
                   "x": 0,
                   "y": 0
                },
                "id": 1,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "options": {
                   "displayMode": "basic",
                   "orientation": "horizontal",
                   "reduceOptions": {
                      "calcs": [
                         "lastNotNull"
                      ],
                      "fields": "",
                      "values": false
                   }
                },
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "(\n  sum by(tempo_service) (\n    label_replace(\n      kube_statefulset_status_replicas_updated{cluster=~\"$cluster\", namespace=~\"$namespace\",statefulset=~\".*(cortex-gw|distributor|ingester|query-frontend|querier|compactor|metrics-generator).*\"},\n      \"tempo_service\", \"$1\", \"statefulset\", \"(.*?)(?:-zone-[a-z])?\"\n    )\n  )\n  /\n  sum by(tempo_service) (\n    label_replace(\n      kube_statefulset_replicas{cluster=~\"$cluster\", namespace=~\"$namespace\"},\n      \"tempo_service\", \"$1\", \"statefulset\", \"(.*?)(?:-zone-[a-z])?\"\n    )\n  )\n) and (\n  sum by(tempo_service) (\n    label_replace(\n      kube_statefulset_replicas{cluster=~\"$cluster\", namespace=~\"$namespace\"},\n      \"tempo_service\", \"$1\", \"statefulset\", \"(.*?)(?:-zone-[a-z])?\"\n    )\n  )\n  > 0\n)\n",
                      "format": null,
                      "intervalFactor": null,
                      "legendFormat": "{{tempo_service}}",
                      "legendLink": null,
                      "step": null
                   },
                   {
                      "expr": "(\n  sum by(tempo_service) (\n    label_replace(\n      kube_deployment_status_replicas_updated{cluster=~\"$cluster\", namespace=~\"$namespace\",deployment=~\".*(cortex-gw|distributor|ingester|query-frontend|querier|compactor|metrics-generator).*\"},\n      \"tempo_service\", \"$1\", \"deployment\", \"(.*?)(?:-zone-[a-z])?\"\n    )\n  )\n  /\n  sum by(tempo_service) (\n    label_replace(\n      kube_deployment_spec_replicas{cluster=~\"$cluster\", namespace=~\"$namespace\"},\n      \"tempo_service\", \"$1\", \"deployment\", \"(.*?)(?:-zone-[a-z])?\"\n    )\n  )\n) and (\n  sum by(tempo_service) (\n    label_replace(\n      kube_deployment_spec_replicas{cluster=~\"$cluster\", namespace=~\"$namespace\"},\n      \"tempo_service\", \"$1\", \"deployment\", \"(.*?)(?:-zone-[a-z])?\"\n    )\n  )\n  > 0\n)\n",
                      "format": null,
                      "intervalFactor": null,
                      "legendFormat": "{{tempo_service}}",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Rollout progress",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "bargauge",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 1,
                      "noValue": "",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            }
                         ]
                      },
                      "unit": "percentunit"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 4,
                   "w": 2,
                   "x": 10,
                   "y": 0
                },
                "id": 2,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\",status_code=~\"2.+\"}[$__rate_interval])) /\nsum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval]))\n",
                      "format": null,
                      "instant": false,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Writes - 2xx",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 1,
                      "noValue": "",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "orange",
                               "value": 0.20000000000000001
                            },
                            {
                               "color": "red",
                               "value": 0.5
                            }
                         ]
                      },
                      "unit": "percentunit"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 4,
                   "w": 2,
                   "x": 12,
                   "y": 0
                },
                "id": 3,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\",status_code=~\"4.+\"}[$__rate_interval])) /\nsum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval]))\n",
                      "format": null,
                      "instant": false,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Writes - 4xx",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 1,
                      "noValue": "",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 0.01
                            }
                         ]
                      },
                      "unit": "percentunit"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 4,
                   "w": 2,
                   "x": 14,
                   "y": 0
                },
                "id": 4,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\",status_code=~\"5.+\"}[$__rate_interval])) /\nsum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval]))\n",
                      "format": null,
                      "instant": false,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Writes - 5xx",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 1,
                      "noValue": "",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "orange",
                               "value": 0.20000000000000001
                            },
                            {
                               "color": "red",
                               "value": 0.5
                            }
                         ]
                      },
                      "unit": "s"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 4,
                   "w": 8,
                   "x": 16,
                   "y": 0
                },
                "id": 5,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "histogram_quantile(0.99, sum by (le) (tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}))\n",
                      "format": null,
                      "instant": false,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Writes 99th latency",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 1,
                      "noValue": "",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            }
                         ]
                      },
                      "unit": "percentunit"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 4,
                   "w": 2,
                   "x": 10,
                   "y": 4
                },
                "id": 6,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\",status_code=~\"2.+\"}[$__rate_interval])) /\nsum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\"}[$__rate_interval]))\n",
                      "format": null,
                      "instant": false,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Reads - 2xx",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 1,
                      "noValue": "",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "orange",
                               "value": 0.01
                            },
                            {
                               "color": "red",
                               "value": 0.050000000000000003
                            }
                         ]
                      },
                      "unit": "percentunit"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 4,
                   "w": 2,
                   "x": 12,
                   "y": 4
                },
                "id": 7,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\",status_code=~\"4.+\"}[$__rate_interval])) /\nsum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\"}[$__rate_interval]))\n",
                      "format": null,
                      "instant": false,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Reads - 4xx",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 1,
                      "noValue": "",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "red",
                               "value": 0.01
                            }
                         ]
                      },
                      "unit": "percentunit"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 4,
                   "w": 2,
                   "x": 14,
                   "y": 4
                },
                "id": 8,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\",status_code=~\"5.+\"}[$__rate_interval])) /\nsum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\"}[$__rate_interval]))\n",
                      "format": null,
                      "instant": false,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Reads - 5xx",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 1,
                      "noValue": "",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "orange",
                               "value": 1
                            },
                            {
                               "color": "red",
                               "value": 2.5
                            }
                         ]
                      },
                      "unit": "s"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 4,
                   "w": 8,
                   "x": 16,
                   "y": 4
                },
                "id": 9,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "histogram_quantile(0.99, sum by (le) (tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\"}))\n",
                      "format": null,
                      "instant": false,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Reads 99th latency",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fieldConfig": {
                   "defaults": {
                      "color": {
                         "mode": "thresholds"
                      },
                      "decimals": 0,
                      "noValue": "All healthy",
                      "thresholds": {
                         "mode": "absolute",
                         "steps": [
                            {
                               "color": "green",
                               "value": null
                            },
                            {
                               "color": "orange",
                               "value": 1
                            },
                            {
                               "color": "red",
                               "value": 2
                            }
                         ]
                      },
                      "unit": "short"
                   },
                   "overrides": [ ]
                },
                "fill": 1,
                "gridPos": {
                   "h": 8,
                   "w": 10,
                   "x": 0,
                   "y": 8
                },
                "id": 10,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "options": {
                   "text": {
                      "titleSize": 14,
                      "valueSize": 14
                   }
                },
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "kube_deployment_status_replicas_unavailable{cluster=~\"$cluster\", namespace=~\"$namespace\", deployment=~\".*(cortex-gw|distributor|ingester|query-frontend|querier|compactor|metrics-generator).*\"}\n> 0\n",
                      "format": null,
                      "instant": true,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "{{deployment}}",
                      "legendLink": null,
                      "step": null
                   },
                   {
                      "expr": "kube_statefulset_status_replicas_current{cluster=~\"$cluster\", namespace=~\"$namespace\", statefulset=~\".*(cortex-gw|distributor|ingester|query-frontend|querier|compactor|metrics-generator).*\"} -\nkube_statefulset_status_replicas_ready {cluster=~\"$cluster\", namespace=~\"$namespace\", statefulset=~\".*(cortex-gw|distributor|ingester|query-frontend|querier|compactor|metrics-generator).*\"}\n> 0\n",
                      "format": null,
                      "instant": true,
                      "interval": "",
                      "intervalFactor": null,
                      "legendFormat": "{{statefulset}}",
                      "legendLink": null,
                      "step": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Unhealthy pods",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "stat",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": 0,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             },
             {
                "datasource": "$datasource",
                "fieldConfig": {
                   "overrides": [
                      {
                         "matcher": {
                            "id": "byRegexp",
                            "options": "r.*"
                         },
                         "properties": [
                            {
                               "id": "custom.align",
                               "value": "center"
                            }
                         ]
                      }
                   ]
                },
                "gridPos": {
                   "h": 8,
                   "w": 6,
                   "x": 10,
                   "y": 8
                },
                "id": 11,
                "targets": [
                   {
                      "expr": "count by(container, version) (\n  label_replace(\n    kube_pod_container_info{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\".*(cortex-gw|distributor|ingester|query-frontend|querier|compactor|metrics-generator).*\"},\n    \"version\", \"$1\", \"image\", \".*:(.+)-.*\"\n  )\n)\n",
                      "instant": true,
                      "legendFormat": "",
                      "refId": "A"
                   }
                ],
                "title": "Pods count per version",
                "transformations": [
                   {
                      "id": "labelsToFields",
                      "options": {
                         "valueLabel": "version"
                      }
                   },
                   {
                      "id": "organize",
                      "options": {
                         "excludeByName": {
                            "Time": true
                         }
                      }
                   },
                   {
                      "id": "sortBy",
                      "options": {
                         "fields": { },
                         "sort": [
                            {
                               "field": "container"
                            }
                         ]
                      }
                   }
                ],
                "type": "table"
             },
             {
                "aliasColors": { },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "$datasource",
                "fill": 1,
                "gridPos": {
                   "h": 8,
                   "w": 8,
                   "x": 16,
                   "y": 8
                },
                "id": 12,
                "legend": {
                   "avg": false,
                   "current": false,
                   "max": false,
                   "min": false,
                   "show": true,
                   "total": false,
                   "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [ ],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [ ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                   {
                      "expr": "1 - (\n  avg_over_time(histogram_quantile(0.99, sum by (le) (tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\"} offset 24h))[1h:])\n  /\n  avg_over_time(histogram_quantile(0.99, sum by (le) (tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}))[1h:])\n)\n",
                      "format": "time_series",
                      "interval": "1m",
                      "legendFormat": "writes",
                      "legendLink": null
                   },
                   {
                      "expr": "1 - (\n  avg_over_time(histogram_quantile(0.99, sum by (le) (tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\"} offset 24h))[1h:])\n  /\n  avg_over_time(histogram_quantile(0.99, sum by (le) (tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=~\"tempo_api_.*\"}))[1h:])\n)\n",
                      "format": "time_series",
                      "interval": "1m",
                      "legendFormat": "reads",
                      "legendLink": null
                   }
                ],
                "thresholds": [ ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Latency vs 24h ago",
                "tooltip": {
                   "shared": true,
                   "sort": 2,
                   "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                   "buckets": null,
                   "mode": "time",
                   "name": null,
                   "show": true,
                   "values": [ ]
                },
                "yaxes": [
                   {
                      "format": "percentunit",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                   },
                   {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                   }
                ]
             }
          ],
          "refresh": "",
          "rows": null,
          "schemaVersion": 27,
          "style": "dark",
          "tags": [
             "tempo"
          ],
          "templating": {
             "list": [
                {
                   "current": {
                      "text": "default",
                      "value": "default"
                   },
                   "hide": 0,
                   "label": "Data source",
                   "name": "datasource",
                   "options": [ ],
                   "query": "prometheus",
                   "refresh": 1,
                   "regex": "",
                   "type": "datasource"
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": false,
                   "label": "cluster",
                   "multi": true,
                   "name": "cluster",
                   "options": [ ],
                   "query": "label_values(tempo_build_info, cluster)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": false,
                   "label": "namespace",
                   "multi": true,
                   "name": "namespace",
                   "options": [ ],
                   "query": "label_values(tempo_build_info{cluster=~'$cluster'}, namespace)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                }
             ]
          },
          "time": {
             "from": "now-1h",
             "to": "now"
          },
          "timepicker": {
             "refresh_intervals": [
                "5s",
                "10s",
                "30s",
                "1m",
                "5m",
                "15m",
                "30m",
                "1h",
                "2h",
                "1d"
             ],
             "time_options": [
                "5m",
                "15m",
                "1h",
                "6h",
                "12h",
                "24h",
                "2d",
                "7d",
                "30d"
             ]
          },
          "timezone": "utc",
          "title": "Rollout progress",
          "uid": "217b16a8c5966b32c770225dea289b19",
          "version": 0
       }
kind: ConfigMap
metadata:
  annotations:
    grafana_dashboard_folder: /dashboards/tempo-mixin
  labels:
    grafana_dashboard: "1"
  name: tempo-rollout-progress.json
  namespace: monitoring-system
---
apiVersion: v1
data:
  tempo-tenants.json: |-
    {
          "annotations": {
             "list": [ ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "hideControls": false,
          "links": [
             {
                "asDropdown": true,
                "icon": "external link",
                "includeVars": true,
                "keepTime": true,
                "tags": [
                   "tempo"
                ],
                "targetBlank": false,
                "title": "Tempo Dashboards",
                "type": "dashboards"
             }
          ],
          "refresh": "",
          "rows": [
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 1,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 12,
                      "stack": false,
                      "steppedLine": false,
                      "styles": [
                         {
                            "alias": "Time",
                            "dateFormat": "YYYY-MM-DD HH:mm:ss",
                            "pattern": "Time",
                            "type": "hidden"
                         },
                         {
                            "alias": "",
                            "colorMode": null,
                            "colors": [ ],
                            "dateFormat": "YYYY-MM-DD HH:mm:ss",
                            "decimals": 2,
                            "pattern": "/.*/",
                            "thresholds": [ ],
                            "type": "string",
                            "unit": "short"
                         }
                      ],
                      "targets": [
                         {
                            "expr": "max(\n  max by (cluster, namespace, limit_name) (tempo_limits_overrides{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",user=\"$tenant\"})\n  or max by (cluster, namespace, limit_name) (tempo_limits_defaults{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\"})\n) by (limit_name)\n",
                            "format": "table",
                            "instant": true,
                            "legendFormat": "",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Limits",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "transform": "table",
                      "type": "table",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Tenant info",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 2,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "dashes": true,
                            "fill": 0
                         },
                         {
                            "alias": "burst limit",
                            "dashes": true,
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_distributor_bytes_received_total{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\",tenant=\"$tenant\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "received",
                            "legendLink": null
                         },
                         {
                            "expr": "max(\n  max by (cluster, namespace, limit_name) (tempo_limits_overrides{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",user=\"$tenant\",limit_name=\"ingestion_rate_limit_bytes\"})\n  or max by (cluster, namespace, limit_name) (tempo_limits_defaults{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",limit_name=\"ingestion_rate_limit_bytes\"})\n) by (ingestion_rate_limit_bytes)\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         },
                         {
                            "expr": "max(\n  max by (cluster, namespace, limit_name) (tempo_limits_overrides{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",user=\"$tenant\",limit_name=\"ingestion_burst_size_bytes\"})\n  or max by (cluster, namespace, limit_name) (tempo_limits_defaults{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",limit_name=\"ingestion_burst_size_bytes\"})\n) by (ingestion_burst_size_bytes)\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "burst limit",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Distributor bytes/s",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "Bps",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 3,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_distributor_spans_received_total{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\",tenant=\"$tenant\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "accepted",
                            "legendLink": null
                         },
                         {
                            "expr": "sum(rate(tempo_discarded_spans_total{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\",tenant=\"$tenant\"}[$__rate_interval])) by (reason)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "refused {{ reason }}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Distributor spans/s",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 4,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "global limit",
                            "dashes": true,
                            "fill": 0
                         },
                         {
                            "alias": "local limit",
                            "dashes": true,
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 4,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "max(tempo_ingester_live_traces{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",tenant=\"$tenant\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "live traces",
                            "legendLink": null
                         },
                         {
                            "expr": "max(\n  max by (cluster, namespace, limit_name) (tempo_limits_overrides{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",user=\"$tenant\",limit_name=\"max_global_traces_per_user\"})\n  or max by (cluster, namespace, limit_name) (tempo_limits_defaults{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",limit_name=\"max_global_traces_per_user\"})\n) by (max_global_traces_per_user)\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "global limit",
                            "legendLink": null
                         },
                         {
                            "expr": "max(\n  max by (cluster, namespace, limit_name) (tempo_limits_overrides{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",user=\"$tenant\",limit_name=\"max_local_traces_per_user\"})\n  or max by (cluster, namespace, limit_name) (tempo_limits_defaults{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",limit_name=\"max_local_traces_per_user\"})\n) by (max_local_traces_per_user)\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "local limit",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Live traces",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Ingestion",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 5,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_query_frontend_queries_total{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|query-frontend)\",tenant=\"$tenant\",op=\"traces\"}[$__rate_interval])) by (status)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{ status }}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Queries/s (ID lookup)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 6,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_query_frontend_queries_total{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|query-frontend)\",tenant=\"$tenant\",op=\"search\"}[$__rate_interval])) by (status)",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{ status }}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Queries/s (search)",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Reads",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 7,
                      "legend": {
                         "show": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "avg(tempodb_blocklist_length{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",tenant=\"$tenant\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "length",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Blockslist length",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 8,
                      "legend": {
                         "show": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum(tempodb_compaction_outstanding_blocks{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",tenant=\"$tenant\"})\n/\ncount(tempo_build_info{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\"})\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "blocks",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Outstanding compactions",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Storage",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 9,
                      "legend": {
                         "show": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_metrics_generator_bytes_received_total{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|metrics-generator)\",tenant=\"$tenant\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "rate",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Bytes/s",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "Bps",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 10,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [
                         {
                            "alias": "limit",
                            "dashes": true,
                            "fill": 0
                         }
                      ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum(tempo_metrics_generator_registry_active_series{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|metrics-generator)\",tenant=\"$tenant\"})",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{ tenant }}",
                            "legendLink": null
                         },
                         {
                            "expr": "max(\n  max by (cluster, namespace, limit_name) (tempo_limits_overrides{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",user=\"$tenant\",limit_name=\"metrics_generator_max_active_series\"})\n  or max by (cluster, namespace, limit_name) (tempo_limits_defaults{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",limit_name=\"metrics_generator_max_active_series\"})\n) by (metrics_generator_max_active_series)\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "limit",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Active series",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Metrics generator",
                "titleSize": "h6"
             }
          ],
          "schemaVersion": 14,
          "style": "dark",
          "tags": [
             "tempo"
          ],
          "templating": {
             "list": [
                {
                   "current": {
                      "text": "default",
                      "value": "default"
                   },
                   "hide": 0,
                   "label": "Data source",
                   "name": "datasource",
                   "options": [ ],
                   "query": "prometheus",
                   "refresh": 1,
                   "regex": "",
                   "type": "datasource"
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": true,
                   "label": "cluster",
                   "multi": true,
                   "name": "cluster",
                   "options": [ ],
                   "query": "label_values(tempo_build_info, cluster)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": true,
                   "label": "namespace",
                   "multi": true,
                   "name": "namespace",
                   "options": [ ],
                   "query": "label_values(tempo_build_info{cluster=~'$cluster'}, namespace)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                },
                {
                   "allValue": null,
                   "current": {
                      "text": "prod",
                      "value": "prod"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": false,
                   "label": "tenant",
                   "multi": false,
                   "name": "tenant",
                   "options": [ ],
                   "query": "label_values(tempodb_blocklist_length{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\"}, tenant)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                }
             ]
          },
          "time": {
             "from": "now-1h",
             "to": "now"
          },
          "timepicker": {
             "refresh_intervals": [
                "5s",
                "10s",
                "30s",
                "1m",
                "5m",
                "15m",
                "30m",
                "1h",
                "2h",
                "1d"
             ],
             "time_options": [
                "5m",
                "15m",
                "1h",
                "6h",
                "12h",
                "24h",
                "2d",
                "7d",
                "30d"
             ]
          },
          "timezone": "utc",
          "title": "Tempo / Tenants",
          "uid": "",
          "version": 0
       }
kind: ConfigMap
metadata:
  annotations:
    grafana_dashboard_folder: /dashboards/tempo-mixin
  labels:
    grafana_dashboard: "1"
  name: tempo-tenants.json
  namespace: monitoring-system
---
apiVersion: v1
data:
  tempo-writes.json: |-
    {
          "annotations": {
             "list": [ ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "hideControls": false,
          "links": [
             {
                "asDropdown": true,
                "icon": "external link",
                "includeVars": true,
                "keepTime": true,
                "tags": [
                   "tempo"
                ],
                "targetBlank": false,
                "title": "Tempo Dashboards",
                "type": "dashboards"
             }
          ],
          "refresh": "",
          "rows": [
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 1,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 2,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", route=\"opentelemetry_proto_collector_trace_v1_traceservice_export\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Gateway",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 3,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (grpc_status) (\n    rate(\n        label_replace(\n            {cluster=~\"$cluster\", job=~\"($namespace)/cortex-gw(-internal)?\", __name__=~\"envoy_cluster_grpc_proto_collector_trace_v1_TraceService_[0-9]+\"},\n            \"grpc_status\", \"$1\", \"__name__\", \"envoy_cluster_grpc_proto_collector_trace_v1_TraceService_(.+)\"\n        )\n        [$__interval:$__interval]\n    )\n)\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{grpc_status}}",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "datasource": null,
                      "fieldConfig": {
                         "defaults": {
                            "custom": { }
                         },
                         "overrides": [ ]
                      },
                      "id": 4,
                      "options": {
                         "content": "Visit [Status codes and their use in gRPC](https://github.com/grpc/grpc/blob/master/doc/statuscodes.md)\n\nCode | Number | Description\n---|---|---\nOK | 0 | Not an error; returned on success.\nCANCELLED | 1 | The operation was cancelled, typically by the caller.\nUNKNOWN | 2 | Unknown error. For example, this error may be returned when a Status value received from another address space belongs to an error space that is not known in this address space. Also errors raised by APIs that do not return enough error information may be converted to this error.\nINVALID_ARGUMENT | 3 | The client specified an invalid argument. Note that this differs from FAILED_PRECONDITION. INVALID_ARGUMENT indicates arguments that are problematic regardless of the state of the system (e.g., a malformed file name).\nDEADLINE_EXCEEDED | 4 | The deadline expired before the operation could complete. For operations that change the state of the system, this error may be returned even if the operation has completed successfully. For example, a successful response from a server could have been delayed long\nNOT_FOUND | 5 | Some requested entity (e.g., file or directory) was not found. Note to server developers: if a request is denied for an entire class of users, such as gradual feature rollout or undocumented allowlist, NOT_FOUND may be used. If a request is denied for some users within a class of users, such as user-based access control, PERMISSION_DENIED must be used.\nALREADY_EXISTS | 6 | The entity that a client attempted to create (e.g., file or directory) already exists.\nPERMISSION_DENIED | 7 | The caller does not have permission to execute the specified operation. PERMISSION_DENIED must not be used for rejections caused by exhausting some resource (use RESOURCE_EXHAUSTED instead for those errors). PERMISSION_DENIED must not be used if the caller can not be identified (use UNAUTHENTICATED instead for those errors). This error code does not imply the request is valid or the requested entity exists or satisfies other pre-conditions.\nRESOURCE_EXHAUSTED | 8 | Some resource has been exhausted, perhaps a per-user quota, or perhaps the entire file system is out of space.\nFAILED_PRECONDITION | 9 | The operation was rejected because the system is not in a state required for the operation's execution. For example, the directory to be deleted is non-empty, an rmdir operation is applied to a non-directory, etc. Service implementors can use the following guidelines to decide between FAILED_PRECONDITION, ABORTED, and UNAVAILABLE: (a) Use UNAVAILABLE if the client can retry just the failing call. (b) Use ABORTED if the client should retry at a higher level (e.g., when a client-specified test-and-set fails, indicating the client should restart a read-modify-write sequence). (c) Use FAILED_PRECONDITION if the client should not retry until the system state has been explicitly fixed. E.g., if an \"rmdir\" fails because the directory is non-empty, FAILED_PRECONDITION should be returned since the client should not retry unless the files are deleted from the directory.\nABORTED | 10 | The operation was aborted, typically due to a concurrency issue such as a sequencer check failure or transaction abort. See the guidelines above for deciding between FAILED_PRECONDITION, ABORTED, and UNAVAILABLE.\nOUT_OF_RANGE | 11 | The operation was attempted past the valid range. E.g., seeking or reading past end-of-file. Unlike INVALID_ARGUMENT, this error indicates a problem that may be fixed if the system state changes. For example, a 32-bit file system will generate INVALID_ARGUMENT if asked to read at an offset that is not in the range [0,2^32-1], but it will generate OUT_OF_RANGE if asked to read from an offset past the current file size. There is a fair bit of overlap between FAILED_PRECONDITION and OUT_OF_RANGE. We recommend using OUT_OF_RANGE (the more specific error) when it applies so that callers who are iterating through a space can easily look for an OUT_OF_RANGE error to detect when they are done.\nUNIMPLEMENTED | 12 | The operation is not implemented or is not supported/enabled in this service.\nINTERNAL | 13 | Internal errors. This means that some invariants expected by the underlying system have been broken. This error code is reserved for serious errors.\nUNAVAILABLE | 14 | The service is currently unavailable. This is most likely a transient condition, which can be corrected by retrying with a backoff. Note that it is not always safe to retry non-idempotent operations.\nDATA_LOSS | 15 | Unrecoverable data loss or corruption.\nUNAUTHENTICATED | 16 | The request does not have valid authentication credentials for the operation.\n",
                         "mode": "markdown"
                      },
                      "span": 6,
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "gRPC status codes",
                      "transparent": false,
                      "type": "text"
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Envoy Proxy",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 5,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum(rate(tempo_receiver_accepted_spans{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "accepted",
                            "legendLink": null
                         },
                         {
                            "expr": "sum(rate(tempo_receiver_refused_spans{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\"}[$__rate_interval]))",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "refused",
                            "legendLink": null
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Spans/Second",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 6,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_distributor_push_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_distributor_push_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_distributor_push_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempo_distributor_push_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|distributor)\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Distributor",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 7,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\", route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 8,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempo_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Ingester",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 9,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_memcache_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",method=\"Memcache.Put\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 10,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",method=\"Memcache.Put\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",method=\"Memcache.Put\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_memcache_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",method=\"Memcache.Put\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempo_memcache_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",method=\"Memcache.Put\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Memcached - Ingester",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 11,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempodb_backend_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",operation=~\"(PUT|POST)\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 12,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",operation=~\"(PUT|POST)\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",operation=~\"(PUT|POST)\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempodb_backend_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",operation=~\"(PUT|POST)\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempodb_backend_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|ingester)\",operation=~\"(PUT|POST)\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Backend - Ingester",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 13,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempo_memcache_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",method=\"Memcache.Put\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 14,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",method=\"Memcache.Put\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempo_memcache_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",method=\"Memcache.Put\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempo_memcache_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",method=\"Memcache.Put\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempo_memcache_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",method=\"Memcache.Put\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Memcached - Compactor",
                "titleSize": "h6"
             },
             {
                "collapse": false,
                "height": "250px",
                "panels": [
                   {
                      "aliasColors": {
                         "1xx": "#EAB839",
                         "2xx": "#7EB26D",
                         "3xx": "#6ED0E0",
                         "4xx": "#EF843C",
                         "5xx": "#E24D42",
                         "OK": "#7EB26D",
                         "cancel": "#A9A9A9",
                         "error": "#E24D42",
                         "success": "#7EB26D"
                      },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 10,
                      "id": 15,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 0,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "sum by (status) (\n  label_replace(label_replace(rate(tempodb_backend_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",operation=~\"(PUT|POST)\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-zA-Z]+)\"))\n",
                            "format": "time_series",
                            "interval": "1m",
                            "legendFormat": "{{status}}",
                            "refId": "A"
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "QPS",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   },
                   {
                      "aliasColors": { },
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "$datasource",
                      "fill": 1,
                      "id": 16,
                      "legend": {
                         "avg": false,
                         "current": false,
                         "max": false,
                         "min": false,
                         "show": true,
                         "total": false,
                         "values": false
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [ ],
                      "nullPointMode": "null as zero",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [ ],
                      "spaceLength": 10,
                      "span": 6,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                         {
                            "expr": "histogram_quantile(0.99, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",operation=~\"(PUT|POST)\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 99th",
                            "refId": "A",
                            "step": 10
                         },
                         {
                            "expr": "histogram_quantile(0.50, sum(rate(tempodb_backend_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",operation=~\"(PUT|POST)\"}[$__rate_interval])) by (le,)) * 1e3",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} 50th",
                            "refId": "B",
                            "step": 10
                         },
                         {
                            "expr": "sum(rate(tempodb_backend_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",operation=~\"(PUT|POST)\"}[$__rate_interval])) by () * 1e3 / sum(rate(tempodb_backend_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(tempo|compactor)\",operation=~\"(PUT|POST)\"}[$__rate_interval])) by ()",
                            "format": "time_series",
                            "interval": "1m",
                            "intervalFactor": 2,
                            "legendFormat": "{{route}} Average",
                            "refId": "C",
                            "step": 10
                         }
                      ],
                      "thresholds": [ ],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "Latency",
                      "tooltip": {
                         "shared": true,
                         "sort": 2,
                         "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                         "buckets": null,
                         "mode": "time",
                         "name": null,
                         "show": true,
                         "values": [ ]
                      },
                      "yaxes": [
                         {
                            "format": "ms",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": 0,
                            "show": true
                         },
                         {
                            "format": "short",
                            "label": null,
                            "logBase": 1,
                            "max": null,
                            "min": null,
                            "show": false
                         }
                      ]
                   }
                ],
                "repeat": null,
                "repeatIteration": null,
                "repeatRowId": null,
                "showTitle": true,
                "title": "Backend - Compactor",
                "titleSize": "h6"
             }
          ],
          "schemaVersion": 14,
          "style": "dark",
          "tags": [
             "tempo"
          ],
          "templating": {
             "list": [
                {
                   "current": {
                      "text": "default",
                      "value": "default"
                   },
                   "hide": 0,
                   "label": "Data source",
                   "name": "datasource",
                   "options": [ ],
                   "query": "prometheus",
                   "refresh": 1,
                   "regex": "",
                   "type": "datasource"
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": true,
                   "label": "cluster",
                   "multi": true,
                   "name": "cluster",
                   "options": [ ],
                   "query": "label_values(tempo_build_info, cluster)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                },
                {
                   "allValue": null,
                   "current": {
                      "selected": true,
                      "text": "All",
                      "value": "$__all"
                   },
                   "datasource": "$datasource",
                   "hide": 0,
                   "includeAll": true,
                   "label": "namespace",
                   "multi": true,
                   "name": "namespace",
                   "options": [ ],
                   "query": "label_values(tempo_build_info{cluster=~'$cluster'}, namespace)",
                   "refresh": 1,
                   "regex": "",
                   "sort": 2,
                   "tagValuesQuery": "",
                   "tags": [ ],
                   "tagsQuery": "",
                   "type": "query",
                   "useTags": false
                }
             ]
          },
          "time": {
             "from": "now-1h",
             "to": "now"
          },
          "timepicker": {
             "refresh_intervals": [
                "5s",
                "10s",
                "30s",
                "1m",
                "5m",
                "15m",
                "30m",
                "1h",
                "2h",
                "1d"
             ],
             "time_options": [
                "5m",
                "15m",
                "1h",
                "6h",
                "12h",
                "24h",
                "2d",
                "7d",
                "30d"
             ]
          },
          "timezone": "utc",
          "title": "Tempo / Writes",
          "uid": "",
          "version": 0
       }
kind: ConfigMap
metadata:
  annotations:
    grafana_dashboard_folder: /dashboards/tempo-mixin
  labels:
    grafana_dashboard: "1"
  name: tempo-writes.json
  namespace: monitoring-system
---
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: tempo-mixin-alerts
  namespace: monitoring-system
spec:
  groups:
  - name: tempo_alerts
    rules:
    - alert: TempoRequestLatency
      annotations:
        message: |
          {{ $labels.job }} {{ $labels.route }} is experiencing {{ printf "%.2f" $value }}s 99th percentile latency.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoRequestLatency
      expr: |
        cluster_namespace_job_route:tempo_request_duration_seconds:99quantile{route!~"metrics|/frontend.Frontend/Process|debug_pprof"} > 3
      for: 15m
      labels:
        severity: critical
    - alert: TempoCompactorUnhealthy
      annotations:
        message: There are {{ printf "%f" $value }} unhealthy compactor(s).
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoCompactorUnhealthy
      expr: |
        max by (cluster, namespace) (tempo_ring_members{state="Unhealthy", name="(tempo|compactor)", namespace=~".*"}) > 0
      for: 15m
      labels:
        severity: critical
    - alert: TempoDistributorUnhealthy
      annotations:
        message: There are {{ printf "%f" $value }} unhealthy distributor(s).
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoDistributorUnhealthy
      expr: |
        max by (cluster, namespace) (tempo_ring_members{state="Unhealthy", name="(tempo|compactor)", namespace=~".*"}) > 0
      for: 15m
      labels:
        severity: warning
    - alert: TempoCompactionsFailing
      annotations:
        message: Greater than 2 compactions have failed in the past hour.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoCompactionsFailing
      expr: |
        sum by (cluster, namespace) (increase(tempodb_compaction_errors_total{}[1h])) > 2 and
        sum by (cluster, namespace) (increase(tempodb_compaction_errors_total{}[5m])) > 0
      for: 5m
      labels:
        severity: critical
    - alert: TempoIngesterFlushesUnhealthy
      annotations:
        message: Greater than 2 flush retries have occurred in the past hour.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoIngesterFlushesFailing
      expr: |
        sum by (cluster, namespace) (increase(tempo_ingester_failed_flushes_total{}[1h])) > 2 and
        sum by (cluster, namespace) (increase(tempo_ingester_failed_flushes_total{}[5m])) > 0
      for: 5m
      labels:
        severity: warning
    - alert: TempoIngesterFlushesFailing
      annotations:
        message: Greater than 2 flush retries have failed in the past hour.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoIngesterFlushesFailing
      expr: |
        sum by (cluster, namespace) (increase(tempo_ingester_flush_failed_retries_total{}[1h])) > 2 and
        sum by (cluster, namespace) (increase(tempo_ingester_flush_failed_retries_total{}[5m])) > 0
      for: 5m
      labels:
        severity: critical
    - alert: TempoPollsFailing
      annotations:
        message: Greater than 2 polls have failed in the past hour.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoPollsFailing
      expr: |
        sum by (cluster, namespace) (increase(tempodb_blocklist_poll_errors_total{}[1h])) > 2 and
        sum by (cluster, namespace) (increase(tempodb_blocklist_poll_errors_total{}[5m])) > 0
      labels:
        severity: critical
    - alert: TempoTenantIndexFailures
      annotations:
        message: Greater than 2 tenant index failures in the past hour.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoTenantIndexFailures
      expr: |
        sum by (cluster, namespace) (increase(tempodb_blocklist_tenant_index_errors_total{}[1h])) > 2 and
        sum by (cluster, namespace) (increase(tempodb_blocklist_tenant_index_errors_total{}[5m])) > 0
      labels:
        severity: critical
    - alert: TempoNoTenantIndexBuilders
      annotations:
        message: No tenant index builders for tenant {{ $labels.tenant }}. Tenant
          index will quickly become stale.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoNoTenantIndexBuilders
      expr: |
        sum by (cluster, namespace, tenant) (tempodb_blocklist_tenant_index_builder{}) == 0 and
        max by (cluster, namespace) (tempodb_blocklist_length{}) > 0
      for: 5m
      labels:
        severity: critical
    - alert: TempoTenantIndexTooOld
      annotations:
        message: Tenant index age is 600 seconds old for tenant {{ $labels.tenant
          }}.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoTenantIndexTooOld
      expr: |
        max by (cluster, namespace, tenant) (tempodb_blocklist_tenant_index_age_seconds{}) > 600
      for: 5m
      labels:
        severity: critical
    - alert: TempoBlockListRisingQuickly
      annotations:
        message: Tempo block list length is up 40 percent over the last 7 days.  Consider
          scaling compactors.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoBlockListRisingQuickly
      expr: |
        avg(tempodb_blocklist_length{namespace=".*"}) / avg(tempodb_blocklist_length{namespace=".*", job=~"$namespace/$component"} offset 7d) > 1.4
      for: 15m
      labels:
        severity: critical
    - alert: TempoBadOverrides
      annotations:
        message: '{{ $labels.job }} failed to reload overrides.'
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoBadOverrides
      expr: |
        sum(tempo_runtime_config_last_reload_successful{namespace=~".*"} == 0) by (cluster, namespace, job)
      for: 15m
      labels:
        severity: warning
    - alert: TempoUserConfigurableOverridesReloadFailing
      annotations:
        message: Greater than 5 user-configurable overides reloads failed in the past
          hour.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoTenantIndexFailures
      expr: |
        sum by (cluster, namespace) (increase(tempo_overrides_user_configurable_overrides_reload_failed_total{}[1h])) > 5 and
        sum by (cluster, namespace) (increase(tempo_overrides_user_configurable_overrides_reload_failed_total{}[5m])) > 0
      labels:
        severity: critical
    - alert: TempoProvisioningTooManyWrites
      annotations:
        message: Ingesters in {{ $labels.cluster }}/{{ $labels.namespace }} are receiving
          more data/second than desired, add more ingesters.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoProvisioningTooManyWrites
      expr: |
        avg by (cluster, namespace) (rate(tempo_ingester_bytes_received_total{job=~".+/ingester"}[1m])) / 1024 / 1024 > 30
      for: 15m
      labels:
        severity: warning
    - alert: TempoCompactorsTooManyOutstandingBlocks
      annotations:
        message: There are too many outstanding compaction blocks in {{ $labels.cluster
          }}/{{ $labels.namespace }} for tenant {{ $labels.tenant }}, increase compactor's
          CPU or add more compactors.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoCompactorsTooManyOutstandingBlocks
      expr: |
        sum by (cluster, namespace, tenant) (tempodb_compaction_outstanding_blocks{container="compactor", namespace=~".*"}) / ignoring(tenant) group_left count(tempo_build_info{container="compactor", namespace=~".*"}) by (cluster, namespace) > 100
      for: 6h
      labels:
        severity: warning
    - alert: TempoCompactorsTooManyOutstandingBlocks
      annotations:
        message: There are too many outstanding compaction blocks in {{ $labels.cluster
          }}/{{ $labels.namespace }} for tenant {{ $labels.tenant }}, increase compactor's
          CPU or add more compactors.
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoCompactorsTooManyOutstandingBlocks
      expr: |
        sum by (cluster, namespace, tenant) (tempodb_compaction_outstanding_blocks{container="compactor", namespace=~".*"}) / ignoring(tenant) group_left count(tempo_build_info{container="compactor", namespace=~".*"}) by (cluster, namespace) > 250
      for: 24h
      labels:
        severity: critical
    - alert: TempoIngesterReplayErrors
      annotations:
        message: Tempo ingester has encountered errors while replaying a block on
          startup in {{ $labels.cluster }}/{{ $labels.namespace }} for tenant {{ $labels.tenant
          }}
        runbook_url: https://github.com/grafana/tempo/tree/main/operations/tempo-mixin/runbook.md#TempoIngesterReplayErrors
      expr: |
        sum by (cluster, namespace, tenant) (increase(tempo_ingester_replay_errors_total{namespace=~".*"}[5m])) > 0
      for: 5m
      labels:
        severity: critical
---
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: tempo-mixin-rules
  namespace: monitoring-system
spec:
  groups:
  - name: tempo_rules
    rules:
    - expr: histogram_quantile(0.99, sum(rate(tempo_request_duration_seconds_bucket[1m]))
        by (le, cluster, namespace, job, route))
      record: cluster_namespace_job_route:tempo_request_duration_seconds:99quantile
    - expr: histogram_quantile(0.50, sum(rate(tempo_request_duration_seconds_bucket[1m]))
        by (le, cluster, namespace, job, route))
      record: cluster_namespace_job_route:tempo_request_duration_seconds:50quantile
    - expr: sum(rate(tempo_request_duration_seconds_sum[1m])) by (cluster, namespace,
        job, route) / sum(rate(tempo_request_duration_seconds_count[1m])) by (cluster,
        namespace, job, route)
      record: cluster_namespace_job_route:tempo_request_duration_seconds:avg
    - expr: sum(rate(tempo_request_duration_seconds_bucket[1m])) by (le, cluster,
        namespace, job, route)
      record: cluster_namespace_job_route:tempo_request_duration_seconds_bucket:sum_rate
    - expr: sum(rate(tempo_request_duration_seconds_sum[1m])) by (cluster, namespace,
        job, route)
      record: cluster_namespace_job_route:tempo_request_duration_seconds_sum:sum_rate
    - expr: sum(rate(tempo_request_duration_seconds_count[1m])) by (cluster, namespace,
        job, route)
      record: cluster_namespace_job_route:tempo_request_duration_seconds_count:sum_rate
